{
  "info": {
    "name": "Pronoyon Question Bank API",
    "description": "Complete API collection for Pronoyon Question Bank System with RBAC",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json",
    "_postman_id": "pronoyon-api-collection",
    "version": "2.0.0"
  },
  "auth": {
    "type": "bearer",
    "bearer": [
      {
        "key": "token",
        "value": "{{access_token}}",
        "type": "string"
      }
    ]
  },
  "variable": [
    {
      "key": "base_url",
      "value": "http://localhost:8000",
      "type": "string"
    },
    {
      "key": "access_token",
      "value": "",
      "type": "string"
    },
    {
      "key": "refresh_token",
      "value": "",
      "type": "string"
    },
    {
      "key": "subject_id",
      "value": "",
      "type": "string"
    },
    {
      "key": "topic_id",
      "value": "",
      "type": "string"
    },
    {
      "key": "question_id",
      "value": "",
      "type": "string"
    },
    {
      "key": "draft_id",
      "value": "",
      "type": "string"
    }
  ],
  "item": [
    {
      "name": "Authentication",
      "item": [
        {
          "name": "Register User",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"email\": \"user@pronoyon.com\",\n  \"password1\": \"SecurePass123!\",\n  \"password2\": \"SecurePass123!\",\n  \"first_name\": \"Test\",\n  \"last_name\": \"User\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/auth/registration/",
              "host": ["{{base_url}}"],
              "path": ["api", "auth", "registration", ""]
            }
          }
        },
        {
          "name": "Login (Admin)",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"email\": \"t@t.com\",\n  \"password\": \"t\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/auth/login/",
              "host": ["{{base_url}}"],
              "path": ["api", "auth", "login", ""]
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 200) {",
                  "    var jsonData = pm.response.json();",
                  "    pm.collectionVariables.set('access_token', jsonData.access);",
                  "    pm.collectionVariables.set('refresh_token', jsonData.refresh);",
                  "}"
                ]
              }
            }
          ]
        },
        {
          "name": "Get Current User",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/api/auth/user/",
              "host": ["{{base_url}}"],
              "path": ["api", "auth", "user", ""]
            }
          }
        },
        {
          "name": "Refresh Token",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"refresh\": \"{{refresh_token}}\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/auth/token/refresh/",
              "host": ["{{base_url}}"],
              "path": ["api", "auth", "token", "refresh", ""]
            }
          }
        },
        {
          "name": "Logout",
          "request": {
            "method": "POST",
            "header": [],
            "url": {
              "raw": "{{base_url}}/api/auth/logout/",
              "host": ["{{base_url}}"],
              "path": ["api", "auth", "logout", ""]
            }
          }
        }
      ]
    },
    {
      "name": "Subjects",
      "item": [
        {
          "name": "List Subjects",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/api/subjects/",
              "host": ["{{base_url}}"],
              "path": ["api", "subjects", ""]
            }
          }
        },
        {
          "name": "Create Subject (Manager)",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"Physics\",\n  \"code\": \"PHY-101\",\n  \"description\": \"General Physics course\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/subjects/",
              "host": ["{{base_url}}"],
              "path": ["api", "subjects", ""]
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 201) {",
                  "    var jsonData = pm.response.json();",
                  "    pm.collectionVariables.set('subject_id', jsonData.id);",
                  "}"
                ]
              }
            }
          ]
        },
        {
          "name": "Get Subject",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/api/subjects/{{subject_id}}/",
              "host": ["{{base_url}}"],
              "path": ["api", "subjects", "{{subject_id}}", ""]
            }
          }
        },
        {
          "name": "Update Subject (Manager)",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"Physics Updated\",\n  \"code\": \"PHY-101\",\n  \"description\": \"Updated description\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/subjects/{{subject_id}}/",
              "host": ["{{base_url}}"],
              "path": ["api", "subjects", "{{subject_id}}", ""]
            }
          }
        },
        {
          "name": "Delete Subject (Manager)",
          "request": {
            "method": "DELETE",
            "header": [],
            "url": {
              "raw": "{{base_url}}/api/subjects/{{subject_id}}/",
              "host": ["{{base_url}}"],
              "path": ["api", "subjects", "{{subject_id}}", ""]
            }
          }
        }
      ]
    },
    {
      "name": "Topics",
      "item": [
        {
          "name": "List Topics",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/api/topics/?subject={{subject_id}}",
              "host": ["{{base_url}}"],
              "path": ["api", "topics", ""],
              "query": [
                {
                  "key": "subject",
                  "value": "{{subject_id}}"
                }
              ]
            }
          }
        },
        {
          "name": "Create Topic (Manager)",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"subject\": \"{{subject_id}}\",\n  \"name\": \"Newton's Laws\",\n  \"description\": \"Laws of motion\",\n  \"order\": 1\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/topics/",
              "host": ["{{base_url}}"],
              "path": ["api", "topics", ""]
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 201) {",
                  "    var jsonData = pm.response.json();",
                  "    pm.collectionVariables.set('topic_id', jsonData.id);",
                  "}"
                ]
              }
            }
          ]
        }
      ]
    },
    {
      "name": "Questions",
      "item": [
        {
          "name": "List Questions",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/api/questions/?subject={{subject_id}}&type=mcq",
              "host": ["{{base_url}}"],
              "path": ["api", "questions", ""],
              "query": [
                {
                  "key": "subject",
                  "value": "{{subject_id}}"
                },
                {
                  "key": "type",
                  "value": "mcq"
                }
              ]
            }
          }
        },
        {
          "name": "Create MCQ Simple (Manager)",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"type\": \"mcq\",\n  \"mcq_subtype\": \"simple\",\n  \"question_text\": \"What is the **acceleration** due to gravity? $g = 9.8 \\\\, m/s^2$\",\n  \"marks\": 1,\n  \"difficulty\": \"easy\",\n  \"subject\": \"{{subject_id}}\",\n  \"topics\": [\"{{topic_id}}\"],\n  \"solution\": \"The standard acceleration due to gravity on Earth is $9.8 \\\\, m/s^2$\",\n  \"mcq_options\": [\n    {\n      \"option_text\": \"$9.8 \\\\, m/s^2$\",\n      \"option_label\": \"A\",\n      \"is_correct\": true,\n      \"order\": 1\n    },\n    {\n      \"option_text\": \"$8.9 \\\\, m/s^2$\",\n      \"option_label\": \"B\",\n      \"is_correct\": false,\n      \"order\": 2\n    },\n    {\n      \"option_text\": \"$10.0 \\\\, m/s^2$\",\n      \"option_label\": \"C\",\n      \"is_correct\": false,\n      \"order\": 3\n    },\n    {\n      \"option_text\": \"$9.0 \\\\, m/s^2$\",\n      \"option_label\": \"D\",\n      \"is_correct\": false,\n      \"order\": 4\n    }\n  ]\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/questions/",
              "host": ["{{base_url}}"],
              "path": ["api", "questions", ""]
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 201) {",
                  "    var jsonData = pm.response.json();",
                  "    pm.collectionVariables.set('question_id', jsonData.id);",
                  "}"
                ]
              }
            }
          ]
        },
        {
          "name": "Create MCQ Combined (Manager)",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"type\": \"mcq\",\n  \"mcq_subtype\": \"combined\",\n  \"question_text\": \"নিচের বিবৃতিগুলো পড়ুন:\\n\\ni. নিউটনের প্রথম সূত্র\\nii. নিউটনের দ্বিতীয় সূত্র\\niii. নিউটনের তৃতীয় সূত্র\\n\\nনিচের কোনটি সঠিক?\",\n  \"marks\": 1,\n  \"difficulty\": \"medium\",\n  \"subject\": \"{{subject_id}}\",\n  \"topics\": [\"{{topic_id}}\"],\n  \"mcq_options\": [\n    {\n      \"option_text\": \"i ও ii\",\n      \"option_label\": \"ক\",\n      \"is_correct\": false,\n      \"order\": 1,\n      \"combined_option_indices\": [0, 1]\n    },\n    {\n      \"option_text\": \"i ও iii\",\n      \"option_label\": \"খ\",\n      \"is_correct\": false,\n      \"order\": 2,\n      \"combined_option_indices\": [0, 2]\n    },\n    {\n      \"option_text\": \"ii ও iii\",\n      \"option_label\": \"গ\",\n      \"is_correct\": false,\n      \"order\": 3,\n      \"combined_option_indices\": [1, 2]\n    },\n    {\n      \"option_text\": \"i, ii ও iii\",\n      \"option_label\": \"ঘ\",\n      \"is_correct\": true,\n      \"order\": 4,\n      \"combined_option_indices\": [0, 1, 2]\n    }\n  ]\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/questions/",
              "host": ["{{base_url}}"],
              "path": ["api", "questions", ""]
            }
          }
        },
        {
          "name": "Create CQ (Manager)",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"type\": \"cq\",\n  \"question_text\": \"একটি বস্তুর উপর $10N$ বল প্রয়োগ করা হলো।\",\n  \"marks\": 10,\n  \"difficulty\": \"hard\",\n  \"subject\": \"{{subject_id}}\",\n  \"topics\": [\"{{topic_id}}\"],\n  \"cq_sub_questions\": [\n    {\n      \"label\": \"a\",\n      \"sub_question_text\": \"বলের সংজ্ঞা লিখুন।\",\n      \"marks\": 2,\n      \"answer\": \"বল হলো এমন একটি বাহ্যিক প্রভাব যা...\",\n      \"order\": 1\n    },\n    {\n      \"label\": \"b\",\n      \"sub_question_text\": \"বস্তুর ত্বরণ নির্ণয় করুন যদি ভর $2kg$ হয়।\",\n      \"marks\": 4,\n      \"answer\": \"$F = ma$ সূত্র থেকে, $a = F/m = 10/2 = 5 \\\\, m/s^2$\",\n      \"order\": 2\n    },\n    {\n      \"label\": \"c\",\n      \"sub_question_text\": \"নিউটনের দ্বিতীয় সূত্র ব্যাখ্যা করুন।\",\n      \"marks\": 4,\n      \"answer\": \"নিউটনের দ্বিতীয় সূত্র অনুযায়ী...\",\n      \"order\": 3\n    }\n  ]\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/questions/",
              "host": ["{{base_url}}"],
              "path": ["api", "questions", ""]
            }
          }
        },
        {
          "name": "Get Question",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/api/questions/{{question_id}}/",
              "host": ["{{base_url}}"],
              "path": ["api", "questions", "{{question_id}}", ""]
            }
          }
        },
        {
          "name": "Update Question (Manager)",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"type\": \"mcq\",\n  \"mcq_subtype\": \"simple\",\n  \"question_text\": \"Updated question text\",\n  \"marks\": 1,\n  \"difficulty\": \"easy\",\n  \"subject\": \"{{subject_id}}\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/questions/{{question_id}}/",
              "host": ["{{base_url}}"],
              "path": ["api", "questions", "{{question_id}}", ""]
            }
          }
        },
        {
          "name": "Delete Question (Manager)",
          "request": {
            "method": "DELETE",
            "header": [],
            "url": {
              "raw": "{{base_url}}/api/questions/{{question_id}}/",
              "host": ["{{base_url}}"],
              "path": ["api", "questions", "{{question_id}}", ""]
            }
          }
        }
      ]
    },
    {
      "name": "User Drafts",
      "item": [
        {
          "name": "List My Drafts",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/api/drafts/",
              "host": ["{{base_url}}"],
              "path": ["api", "drafts", ""]
            }
          }
        },
        {
          "name": "Create Draft",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"title\": \"My Physics Exam Paper\",\n  \"description\": \"Collection for final exam\",\n  \"is_favorite\": false\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/drafts/",
              "host": ["{{base_url}}"],
              "path": ["api", "drafts", ""]
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 201) {",
                  "    var jsonData = pm.response.json();",
                  "    pm.collectionVariables.set('draft_id', jsonData.id);",
                  "}"
                ]
              }
            }
          ]
        },
        {
          "name": "Get Draft",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/api/drafts/{{draft_id}}/",
              "host": ["{{base_url}}"],
              "path": ["api", "drafts", "{{draft_id}}", ""]
            }
          }
        },
        {
          "name": "Add Question to Draft",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"question\": \"{{question_id}}\",\n  \"order\": 1,\n  \"notes\": \"Important question for exam\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/drafts/{{draft_id}}/questions/",
              "host": ["{{base_url}}"],
              "path": ["api", "drafts", "{{draft_id}}", "questions", ""]
            }
          }
        },
        {
          "name": "Remove Question from Draft",
          "request": {
            "method": "DELETE",
            "header": [],
            "url": {
              "raw": "{{base_url}}/api/drafts/{{draft_id}}/questions/{{question_id}}/",
              "host": ["{{base_url}}"],
              "path": ["api", "drafts", "{{draft_id}}", "questions", "{{question_id}}", ""]
            }
          }
        },
        {
          "name": "Update Draft",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"title\": \"Updated Draft Title\",\n  \"description\": \"Updated description\",\n  \"is_favorite\": true\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/drafts/{{draft_id}}/",
              "host": ["{{base_url}}"],
              "path": ["api", "drafts", "{{draft_id}}", ""]
            }
          }
        },
        {
          "name": "Delete Draft",
          "request": {
            "method": "DELETE",
            "header": [],
            "url": {
              "raw": "{{base_url}}/api/drafts/{{draft_id}}/",
              "host": ["{{base_url}}"],
              "path": ["api", "drafts", "{{draft_id}}", ""]
            }
          }
        }
      ]
    },
    {
      "name": "Wallet & Payments",
      "item": [
        {
          "name": "Get My Wallet Balance",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/api/wallet/",
              "host": ["{{base_url}}"],
              "path": ["api", "wallet", ""]
            }
          }
        },
        {
          "name": "Top Up Wallet (bKash)",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"amount\": 500,\n  \"payment_method\": \"bkash\",\n  \"gateway_transaction_id\": \"TXN123456789\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/wallet/topup/",
              "host": ["{{base_url}}"],
              "path": ["api", "wallet", "topup", ""]
            }
          }
        },
        {
          "name": "Wallet Transaction History",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/api/wallet/transactions/",
              "host": ["{{base_url}}"],
              "path": ["api", "wallet", "transactions", ""]
            }
          }
        },
        {
          "name": "Export Draft to PDF",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"draft_id\": \"{{draft_id}}\",\n  \"include_solutions\": false\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/export/pdf/",
              "host": ["{{base_url}}"],
              "path": ["api", "export", "pdf", ""]
            },
            "description": "Exports draft to PDF. Deducts payment from wallet (0.5 TK per MCQ, 3 TK per CQ)"
          }
        },
        {
          "name": "Payment History",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/api/payments/",
              "host": ["{{base_url}}"],
              "path": ["api", "payments", ""]
            }
          }
        }
      ]
    },
    {
      "name": "Admin - User Management",
      "item": [
        {
          "name": "List All Users (Admin)",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/api/admin/users/",
              "host": ["{{base_url}}"],
              "path": ["api", "admin", "users", ""]
            }
          }
        },
        {
          "name": "Get User Details (Admin)",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/api/admin/users/:user_id/",
              "host": ["{{base_url}}"],
              "path": ["api", "admin", "users", ":user_id", ""]
            }
          }
        },
        {
          "name": "Assign Role to User (Admin)",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"user_id\": \"user-uuid-here\",\n  \"role\": \"manager\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/rbac/assign-role/",
              "host": ["{{base_url}}"],
              "path": ["api", "rbac", "assign-role", ""]
            }
          }
        },
        {
          "name": "Deactivate User (Admin)",
          "request": {
            "method": "POST",
            "header": [],
            "url": {
              "raw": "{{base_url}}/api/admin/users/:user_id/deactivate/",
              "host": ["{{base_url}}"],
              "path": ["api", "admin", "users", ":user_id", "deactivate", ""]
            }
          }
        }
      ]
    },
    {
      "name": "Admin - Payment Monitoring",
      "item": [
        {
          "name": "All Payments (Admin)",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/api/admin/payments/",
              "host": ["{{base_url}}"],
              "path": ["api", "admin", "payments", ""]
            }
          }
        },
        {
          "name": "All Wallet Transactions (Admin)",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/api/admin/wallet-transactions/",
              "host": ["{{base_url}}"],
              "path": ["api", "admin", "wallet-transactions", ""]
            }
          }
        },
        {
          "name": "Verify Wallet Top-up (Admin)",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"transaction_id\": \"transaction-uuid-here\",\n  \"status\": \"completed\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/admin/wallet-transactions/verify/",
              "host": ["{{base_url}}"],
              "path": ["api", "admin", "wallet-transactions", "verify", ""]
            }
          }
        }
      ]
    },
    {
      "name": "RBAC",
      "item": [
        {
          "name": "Get My Permissions",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/api/rbac/my-permissions/",
              "host": ["{{base_url}}"],
              "path": ["api", "rbac", "my-permissions", ""]
            }
          }
        },
        {
          "name": "List All Roles",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/api/rbac/roles/",
              "host": ["{{base_url}}"],
              "path": ["api", "rbac", "roles", ""]
            }
          }
        },
        {
          "name": "List All Permissions",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/api/rbac/permissions/",
              "host": ["{{base_url}}"],
              "path": ["api", "rbac", "permissions", ""]
            }
          }
        }
      ]
    },
    {
      "name": "Health Check",
      "item": [
        {
          "name": "API Health",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/health/",
              "host": ["{{base_url}}"],
              "path": ["health", ""]
            }
          }
        }
      ]
    }
  ]
}
